<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="reviews">
	<select id="selectPoomList" parameterType="int" resultType="Review">
		SELECT no,  title, name, bookingNo,  content, score, regdate, userNo
		FROM(SELECT no,  title, name, bookingNo,  content, score, regdate, userNo, rownum r
		FROM(SELECT r.no no, p.title title,u.name name,r.booking_no bookingNo, r.content content,r.score score,r.regdate regdate, b.user_no userNo
		FROM reviews r, bookings b, pooms p, users u
		WHERE p.user_no = #{userNo}
		AND r.booking_no = b.no
		AND p.no = b.poom_no
		AND u.no = r.user_no
		ORDER BY r.regdate desc))
		WHERE r BETWEEN #{start} AND #{end}
	</select>  <!-- 유저페이지에서 품리뷰 불러오기 .영훈 -->

	
	
	<select id="selectMyList" parameterType="int" resultType="Review">
		SELECT no, title, name, bookingNo, content, score, regdate
		FROM(SELECT no, title, name, bookingNo, content, score, regdate, rownum r
		FROM(SELECT r.no no, p.title title,u.name name,r.booking_no bookingNo, r.content content,r.score score,r.regdate regdate
		FROM reviews r, bookings b, pooms p, users u
		WHERE r.user_no = #{userNo}
		AND r.booking_no = b.no
		AND p.no = b.poom_no
		AND u.no = r.user_no
		ORDER BY r.regdate desc))
		WHERE r BETWEEN #{start} AND #{end}
	</select>  <!-- 유저페이지에서 내리뷰 불러오기 .영훈 -->

</mapper>